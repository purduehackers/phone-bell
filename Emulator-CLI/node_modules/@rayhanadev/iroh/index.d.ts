/* auto-generated by NAPI-RS */
/* eslint-disable */
/** Result of opening a bidirectional stream */
export declare class BiStreamResult {
  get send(): SendStream
  get recv(): RecvStream
}

/** A QUIC connection to a remote endpoint */
export declare class Connection {
  /** Get the remote endpoint's ID (public key) */
  remoteNodeId(): string
  /** Get the ALPN protocol used for this connection */
  alpn(): Buffer
  /**
   * Open a bidirectional stream
   * Returns an object with send and recv properties
   */
  openBi(): Promise<BiStreamResult>
  /** Open a unidirectional stream (send only) */
  openUni(): Promise<SendStream>
  /** Accept a bidirectional stream opened by the remote */
  acceptBi(): Promise<BiStreamResult>
  /** Accept a unidirectional stream opened by the remote (receive only) */
  acceptUni(): Promise<RecvStream>
  /** Close the connection with an error code and reason */
  close(errorCode?: number | undefined | null, reason?: string | undefined | null): void
  /** Wait for the connection to be closed */
  closed(): Promise<string>
  /** Get the current round-trip time estimate in milliseconds */
  rtt(): number
  /** Get the maximum datagram size that can be sent */
  maxDatagramSize(): number | null
  /** Send an unreliable datagram */
  sendDatagram(data: Buffer): void
  /** Receive an unreliable datagram */
  readDatagram(): Promise<Buffer>
}

/** An iroh Endpoint for establishing p2p connections */
export declare class Endpoint {
  /** Create a new Endpoint with default settings */
  static create(): Promise<Endpoint>
  /** Create a new Endpoint with options */
  static createWithOptions(options: EndpointOptions): Promise<Endpoint>
  /** Get the endpoint's unique identifier (public key) */
  nodeId(): string
  /**
   * Get the endpoint's address information as a string
   * This can be shared with others to allow them to connect
   */
  addr(): string
  /** Wait until the endpoint is online (connected to a relay) */
  online(): Promise<void>
  /**
   * Connect to a remote endpoint
   *
   * @param addr - The remote endpoint address (NodeId or full EndpointAddr)
   * @param alpn - The ALPN protocol to use for this connection
   */
  connect(addr: string, alpn: string): Promise<Connection>
  /**
   * Accept an incoming connection
   * Returns None if the endpoint is closed
   */
  accept(): Promise<Connection | null>
  /** Close the endpoint gracefully */
  close(): Promise<void>
  /** Check if the endpoint is closed */
  isClosed(): boolean
}

/** A stream for receiving data from a remote endpoint */
export declare class RecvStream {
  /**
   * Read data from the stream
   * Returns null when the stream is finished
   */
  read(maxLength: number): Promise<Buffer | null>
  /** Read exactly the specified number of bytes */
  readExact(length: number): Promise<Buffer>
  /** Read all remaining data from the stream up to a maximum size */
  readToEnd(maxLength: number): Promise<Buffer>
  /** Stop reading from the stream */
  stop(errorCode: number): Promise<void>
  /** Get the stream ID */
  id(): Promise<string>
}

/** A stream for sending data to a remote endpoint */
export declare class SendStream {
  /** Write data to the stream */
  write(data: Buffer): Promise<number>
  /** Write all data to the stream */
  writeAll(data: Buffer): Promise<void>
  /** Finish the stream, signaling no more data will be sent */
  finish(): Promise<void>
  /** Reset the stream with an error code */
  reset(errorCode: number): Promise<void>
  /** Get the stream ID */
  id(): Promise<string>
}

/** Options for creating an Endpoint */
export interface EndpointOptions {
  /** ALPN protocols to accept for incoming connections */
  alpns?: Array<string>
  /** Secret key as hex string (32 bytes). If not provided, a random key is generated. */
  secretKey?: string
}

/** Initialize logging (optional, can be called from JS) */
export declare function initLogging(level?: string | undefined | null): void
